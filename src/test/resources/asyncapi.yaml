asyncapi: '2.6.0'
info:
  title: Test API
  version: '1.0.0'
  description: |
    The Test API allows to test asyncapi generator, targeting 3.0.0 (next major)
  license:
    name: Apache 2.0
    url: 'https://www.apache.org/licenses/LICENSE-2.0'

servers:
  production:
    url: kafka:9092
    protocol: kafka

channels:
  inout:
    subscribe:
      bindings:
        kafka:
          groupId: in-group
      operationId: read
      message:
        payload:
          $ref: "#/components/schemas/TestPayload"
        bindings:
          kafka:
            key:
              $ref: "#/components/schemas/TestKey"
    publish:
      bindings:
        kafka:
          groupId: out-group
      operationId: write
      message:
        payload:
          $ref: "#/components/schemas/TestPayload"
        bindings:
          kafka:
            key:
              $ref: "#/components/schemas/TestKey"
components:
  schemas:
    TestEmpty:
      type: object
    TestKey:
      type: object
      properties:
        key:
          type: string
    TestPayload:
      type: object
      properties:
        prop1:
          type: integer
          minimum: 0
        prop2:
          type: string
          format: date-time
        prop3:
          type: number
          format: double
        prop4:
          type: string
          enum: [THIS, THAT]